<!DOCTYPE html>
<html>
  <head>
    <title>Tester Environment</title>
    <meta charset="UTF-8">
    <style>
      html {
        background-color: white;
      }
      body {
        width: 600px;
        height: 3000px;
        display: flex;
        justify-content: center;
        margin: auto;
        border-radius: 10px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
        background-color: bisque;
      }
      .parent {
        position: relative;
        display: flex;
        margin-top: 60px;
        flex-direction: column;
      }

      .ced {
        width: 500px;
        background-color: aqua;     
        min-height: 25px; 
        max-height: 715px;
        padding: 4px;
        border: 1px solid gray;
        font-family: Arial, sans-serif;
        overflow-x: hidden;
      }

      .ced:focus {
        outline: none;
      }

      .other {
        width: 509.6px;
        height: 35px;
        background-color: aquamarine; 
      }
    </style>

    <script>
      
      document.addEventListener("DOMContentLoaded", () => {
        const scrollPosition = window.scrollY;
        const ced = document.querySelector(".ced");
        const other = document.querySelector(".other");
        

        function updateOtherPosition() {
          const cedRect = ced.getBoundingClientRect();
          if (cedRect.bottom + 35 >= window.innerHeight) {
            other.style.position = "fixed";
            other.style.bottom = "0";
          } else {
            other.style.removeProperty("position");
            other.style.removeProperty("bottom");
          }
        }

        updateOtherPosition();

        ced.addEventListener("input", () => {
          const length = ced.textContent.length;
          if (length > 2267){
            ced.style.height = "auto";
            ced.style.overflowY = "scroll";
          } else {
            ced.style.height = "auto";
            ced.style.overflowY = "hidden"
          }
          console.log(ced.scrollHeight);
          updateOtherPosition();
        });
        ced.addEventListener("paste", () => {
          window.scrollTo(0, scrollPosition);
        });
        window.addEventListener("scroll", () => {
          
          updateOtherPosition();
        });
      });
    </script>

  </head>
  <body>
    <div class="parent">
      <div class="ced" contenteditable="true"></div>
      <div class="other"></div>
    </div>
  </body>
</html>

